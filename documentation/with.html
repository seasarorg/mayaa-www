<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html lang="ja">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
    <title>Mayaa : Documentation : 3-5. ひとつのタグに複数のプロセッサを対応付ける</title>
    <link rel="STYLESHEET" href="./mayaa.css" type="text/css">
</head>
<body>
<div class="header">
<div>Mayaa : JavaServer Templates</div>
</div>

<div class="navi">
<a href="./echo.html">←タグの属性のみを置き換える</a>
<a href="./index.html">↑index</a>
<a href="./another_component.html">もうひとつのコンポーネント記述方法→</a>
</div>

<div class="main">


<h1>3-5. ひとつのタグに複数のプロセッサを対応付ける</h1>

<p>テンプレート上のタグひとつに対して複数のプロセッサを関連付けたい場合には、プロセッサの中に他のプロセッサを書くことで実現できます。複数のプロセッサをまとめる目的であれば、<strong>with プロセッサ</strong>を使います。</p>


<h2>簡単な例</h2>

<p>ごく簡単なサンプルで実際に使ってみましょう。パラメータ <code>name</code> が空でなければ「<code>hello, (name の値)</code>」と表示し、<code>name</code> が空なら「<code>no name</code>」と表示します。</p>

<pre>
with.html
<div class="file">&lt;html&gt;
&lt;body&gt;
    &lt;span <strong>id="message"</strong>&gt;dummy&lt;/span&gt;
&lt;/body&gt;
&lt;/html&gt;</div>
with.mayaa
<div class="file">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;m:mayaa xmlns:m="http://mayaa.seasar.org"&gt;
    &lt;<strong>m:with</strong> <strong>id="message"</strong>&gt;
        &lt;m:if test="&#36;{ param.name &amp;amp;&amp;amp; param.name.length &gt; 0 }"&gt;
            hello,
        &lt;/m:if&gt;
        &lt;m:write value="&#36;{ param.name }" default="no name" /&gt;
    &lt;/<strong>m:with</strong>&gt;
&lt;/m:mayaa&gt;</div></pre>

<p>条件判定と <code>write</code> プロセッサの <code>default</code> を併用しています。パラメータ <code>param.name</code> 自体がない場合は <code>param.name</code> を <code>boolean</code> として評価した結果が <code>false</code> になります。(JavaScript の <code>undefined</code>)</p>
<p>ブラウザで <code><a href="http://localhost:8080/mayaa/with.html?name=" target="_blank">http://localhost:8080/mayaa/with.html?name=</a></code> にアクセスしてみましょう。</p>

<pre>
実行結果
<div class="file">&lt;html&gt;
&lt;body&gt;
    no name
&lt;/body&gt;
&lt;/html&gt;</div></pre>

<p>パラメータ <code>name</code> の値が空ですので「<code>hello,</code>」は出力されず、<code>write</code> プロセッサの <code>default</code> 値である「<code>no name</code>」だけが出力されています。</p>

<p>続いて <code><a href="http://localhost:8080/mayaa/with.html?name=hello" target="_blank">http://localhost:8080/mayaa/with.html?name=hello</a></code> にアクセスしてみましょう。</p>

<pre>
実行結果
<div class="file">&lt;html&gt;
&lt;body&gt;
    hello, world
&lt;/body&gt;
&lt;/html&gt;</div></pre>

<p>パラメータ <code>name</code> の値がありますので「<code>hello,</code>」に続いて <code>name</code> の値である「world」が出力されています。</p>


</div>

<div class="navi">
<a href="./echo.html">←タグの属性のみを置き換える</a>
<a href="./index.html">↑index</a>
<a href="./another_component.html">もうひとつのコンポーネント記述方法→</a>
</div>

<div class="footer">
&copy;2004-2005, The Seasar Foundation and the others, all rights reserved.
</div>

</body>
</html>
