<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html lang="ja">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
    <title>Maya : Documentation : 3-1. レンダリング前後にスクリプトを実行する</title>
    <link rel="STYLESHEET" href="./maya.css" type="text/css">
</head>
<body>
<div class="header">
<div>Maya : JavaServer Templates</div>
</div>

<div class="navi">
<a href="./index.html">↑index</a>
</div>

<div style="font-size: xx-large; background-color: red; color: white">作成中</div>

<div class="main">

<h1>3-1. レンダリング前後にスクリプトを実行する</h1>


<h2>レンダリング前にスクリプトを実行する</h2>

<p>ページのレンダリング処理を開始する前にスクリプトを実行できます。beforeRender プロセッサを使い、ボディにスクリプトをそのまま書いてください。</p>

<pre>
    &lt;m:beforeRender&gt;
        var cal = java.util.Calendar.getInstance();
        cal.set(java.util.Calendar.YEAR, 2000);
        var date = cal.getTime();
    &lt;/m:beforeRender&gt;

    &lt;m:write id="past" value="&#36;{ date }" /&gt;
</pre>

<p>等号などを使う場合、CDATA 宣言するとエスケープする必要がなくなります。</p>

<pre>
    &lt;m:beforeRender&gt;&lt;[!CDATA[
        var sum = 0;
        for (var i = 0; i < 10; i++) {
            sum += i;
        }
    ]]&gt;&lt;/m:beforeRender&gt;

    &lt;m:write id="result" value="&#36;{ sum }" /&gt;
</pre>


<h2>レンダリング後にスクリプトを実行する</h2>

<p>ページのレンダリング処理が終了した後にスクリプトを実行できます。afterRender プロセッサを使い、ボディにスクリプトをそのまま書いてください。</p>

<pre>
    &lt;m:afterRender&gt;
        Packages.org.example.Logger.log("rendered.");
    &lt;/m:afterRender&gt;
</pre>

<p>beforeRender と同じく、CDATA 宣言すると等号などをエスケープする必要がなくなります。</p>


</div>

<div class="footer">
&copy;2004-2005, The Seasar Foundation and the others, all rights reserved.
</div>

</body>
</html>
