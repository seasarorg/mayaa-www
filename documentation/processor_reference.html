<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML lang="ja">
<HEAD>
<META http-equiv="Content-Type" content="text/html; charset=utf-8">
<TITLE>4-1. Mayaa core プロセッサ リファレンス : Documentation - JavaServer Templates &quot;Mayaa&quot;</TITLE>
<LINK href="../css/base.css" rel="stylesheet" type="text/css">
<LINK href="../css/menu_contents.css" rel="stylesheet" type="text/css">
</HEAD>
<BODY leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" class="background">

<DIV align="center"><IMG src="../images/topbar.gif" width="760" height="4"></DIV>

<DIV align="center">
<DIV class="contentslogo"><A href="../index.html" id="menu08"><IMG src="../images/logo.gif" alt="Mayaa JavaServer Template" width="430" height="48"></A><IMG src="../images/topstripe.gif" width="330" height="48"></DIV>
<DIV class="menudocs">
<A href="../about/index.html" id="menu01"><IMG src="images/menu_about.gif" width="125" height="55"></A><IMG src="images/menu_div.gif" width="1" height="55"><A href="../news/index.html" id="menu02"><IMG src="images/menu_news.gif" alt="News" width="126" height="55" border="0"></A><IMG src="images/menu_div.gif" width="1" height="55"><A href="index.html"><IMG src="images/menu_doc_o.gif" width="126" height="55"></A><IMG src="images/menu_div.gif" width="1" height="55"><A href="../downloads/index.html" id="menu04"><IMG src="images/menu_down.gif" alt="downloads" width="126" height="55"></A><IMG src="images/menu_div.gif" width="1" height="55"><A href="../subprojects/index.html" id="menu05"><IMG src="images/menu_subpro.gif" alt="SubProjects" width="126" height="55"></A><IMG src="images/menu_div.gif" width="1" height="55"><A href="../support/index.html" id="menu06"><IMG src="images/menu_support.gif" alt="Support" width="126" height="55"></A>
</DIV>
</DIV>


<DIV class="maincontents">
<DIV ID="contentsleft">
<IMG src="../images/arrow02.gif" align="absmiddle"><A href="../index.html" class="text11px">Top</A>
<DIV class="sidemenu"><a href="index.html">Documentation Top</a></DIV>
<DIV class="sidemenu"><a href="changelog.html">更新履歴</a></DIV>
<DIV class="sidemenu"><a href="slide.html">スライドなど</a></DIV>
<DIV class="sidemenu"><a href="about.html">1. Mayaa 導入</a></DIV>
<DIV class="sidemenu"><a href="hello.html">2. Mayaa チュートリアル</a></DIV>
<DIV class="sidemenu"><a href="default.html">3. How To</a></DIV>
<DIV class="sidemenu"><a href="#top">4. リファレンス</a></DIV>
<DIV class="sidemenutext"><span>4-1. プロセッサ リファレンス</span></DIV>
<DIV class="sidemenutext"><a href="implicit_object.html">4-2. 定義済みオブジェクト</a></DIV>
<BR>
<DIV class="sidemenu"><a href="engine_settings.html">5. エンジン設定</a></DIV>
<DIV class="sidemenu"><a href="mayaa_customtag_diff.html">付録</a></DIV>
<br>
<DIV class="sidemenu"><a href="link.html">外部へのリンク</a></DIV>
</DIV>


<DIV ID="contentsright">
<H1><A name="top"></A>Documentation</H1>
<H2>4-1. Mayaa core プロセッサ リファレンス</H2>

<p>Mayaa 標準で用意しているプロセッサのリファレンスマニュアルです。</p>

<div class="toc">
<h3 class="nomargin-top"><a name="toc"></a>目次</h3>

<h4>出力系</h4>
<ul>
<li><a href="#attribute">attribute プロセッサ</a></li>
<li><a href="#comment">comment プロセッサ</a></li>
<li><a href="#echo">echo プロセッサ</a></li>
<li><a href="#element">element プロセッサ</a></li>
<li><a href="#formatDate">formatDate プロセッサ</a></li>
<li><a href="#formatNumber">formatNumber プロセッサ</a></li>
<li><a href="#write">write プロセッサ</a></li>
</ul>

<h4>制御系</h4>
<ul>
<li><a href="#for">for プロセッサ</a></li>
<li><a href="#forEach">forEach プロセッサ</a></li>
<li><a href="#if">if プロセッサ</a></li>
<li><a href="#with">with プロセッサ</a></li>
</ul>

<h4>コンポーネント系</h4>
<ul>
<li><a href="#doBase">doBase プロセッサ</a></li>
<li><a href="#doBody">doBody プロセッサ</a></li>
<li><a href="#doRender">doRender プロセッサ</a></li>
<li><a href="#insert">insert プロセッサ</a></li>
</ul>

<h4>その他</h4>
<ul>
<li><a href="#exec">exec プロセッサ</a></li>
<li><a href="#ignore">ignore タグ</a></li>
<li><a href="#null">null タグ</a></li>
</ul>
</div>


<h3>出力系</h3>

<h4><a name="attribute"></a>■attribute プロセッサ <span class="to_toc">(<a href="#toc" title="目次へ">↑目次へ</a>)</span></h4>
<P>echo プロセッサおよび element プロセッサの子として使用し、親プロセッサに属性を追加します。</P>
<table align="center" cellpadding="5" cellspacing="2" class="tbline">
<thead><tr><th nowrap><DIV>属性名</DIV></th><th nowrap><DIV>説明</DIV></th><th><DIV>必須</DIV></th><th><DIV>値の制限</DIV></th><th><DIV>規定値</DIV></th></tr></thead>
<tbody>
<tr>
	<td>name</td>
	<td>生成する属性名。</td>
	<td><DIV align="center">○</DIV></td>
	<td>文字列</td>
	<td></td>
</tr>
<tr>
	<td>value</td>
	<td>生成する属性値。</td>
	<td><DIV align="center">○</DIV></td>
	<td></td>
	<td></td>
</tr>
</tbody>
</table>

<h4><a name="comment"></a>■comment プロセッサ <span class="to_toc">(<a href="#toc" title="目次へ">↑目次へ</a>)</span></h4>
<P>タグのボディが有効です。</P>
<P>ボディの内容をコメント(&lt;!--と--&gt;ではさんだ状態)として出力します。</P>

<h4><a name="echo"></a>■echo プロセッサ <span class="to_toc">(<a href="#toc" title="目次へ">↑目次へ</a>)</span></h4>
<P>タグのボディが有効です。</P>
<P>割り当てられたタグをそのまま出力します。m:echo タグのボディに attribute プロセッサを書くと属性を追加または変更できます。</P>

<h4><a name="element"></a>■element プロセッサ <span class="to_toc">(<a href="#toc" title="目次へ">↑目次へ</a>)</span></h4>
<P>タグのボディが有効です。</P>
<P><code>name</code> で指定したタグを出力します。m:element タグのボディに attribute プロセッサを書くと属性を追加できます。</P>
<table align="center" cellpadding="5" cellspacing="2" class="tbline">
<thead><tr><th nowrap><DIV>属性名</DIV></th><th nowrap><DIV>説明</DIV></th><th><DIV>必須</DIV></th><th><DIV>値の制限</DIV></th><th><DIV>規定値</DIV></th></tr></thead>
<tbody>
<tr>
	<td>name</td>
	<td>生成するタグの要素名。</td>
	<td><DIV align="center">○</DIV></td>
	<td>文字列</td>
	<td></td>
</tr>
</tbody>
</table>

<h4><a name="formatDate"></a>■formatDate プロセッサ <span class="to_toc">(<a href="#toc" title="目次へ">↑目次へ</a>)</span></h4>
<P>日付を指定したパターンにフォーマットして出力します。value に null を渡した場合は何も出力しません。</P>
<table align="center" cellpadding="5" cellspacing="2" class="tbline">
<thead><tr><th nowrap><DIV>属性名</DIV></th><th nowrap><DIV>説明</DIV></th><th><DIV>必須</DIV></th><th><DIV>値の制限</DIV></th><th><DIV>規定値</DIV></th></tr></thead>
</thead>
<tbody>
<tr>
	<td nowrap>value</td>
	<td>出力する値。</td>
	<td><DIV align="center">○</DIV></td>
	<td>java.util.Date</td>
	<td></td>
</tr>
<tr>
	<td>pattern</td>
	<td>日付をフォーマットするパターン。<br>java.text.SimpleDateFormat のフォーマット書式に準じます。</td>
	<td></td>
	<td>文字列</td>
	<td></td>
</tr>
</tbody>
</table>

<h4><a name="formatNumber"></a>■formatNumber プロセッサ <span class="to_toc">(<a href="#toc" title="目次へ">↑目次へ</a>)</span></h4>
<P>数値を指定したパターンにフォーマットして出力します。value に null を渡した場合は何も出力しません。</P>
<table align="center" cellpadding="5" cellspacing="2" class="tbline">
<thead><tr><th nowrap><DIV>属性名</DIV></th><th nowrap><DIV>説明</DIV></th><th><DIV>必須</DIV></th><th><DIV>値の制限</DIV></th><th><DIV>規定値</DIV></th></tr></thead>
</thead>
<tbody>
<tr>
	<td nowrap>value</td>
	<td>出力する値。</td>
	<td><DIV align="center">○</DIV></td>
	<td>数値</td>
	<td></td>
</tr>
<tr>
	<td>pattern</td>
	<td>数値をフォーマットするパターン。<br>java.text.DecimalFormat のフォーマット書式に準じます。</td>
	<td></td>
	<td>文字列</td>
	<td></td>
</tr>
</tbody>
</table>

<h4><a name="write"></a>■write プロセッサ <span class="to_toc">(<a href="#toc" title="目次へ">↑目次へ</a>)</span></h4>
<P>オブジェクトを文字列として出力します。</P>
<p>(<strong>※</strong>:1.0.2で変更されたもの)</p>
<table align="center" cellpadding="5" cellspacing="2" class="tbline">
<thead><tr><th nowrap><DIV>属性名</DIV></th><th nowrap><DIV>説明</DIV></th><th><DIV>必須</DIV></th><th><DIV>値の制限</DIV></th><th><DIV>規定値</DIV></th></tr></thead>
</thead>
<tbody>
<tr>
	<td nowrap>value</td>
	<td>出力する値。</td>
	<td><DIV align="center">○</DIV></td>
	<td></td>
	<td></td>
</tr>
<tr>
	<td nowrap>default</td>
	<td nowrap>value が null の場合に出力する値。<br>(escapeXml, escapeWhitespace, escapeEol<br>による置換処理の対象になりません)<strong>(※)</strong></td>
	<td></td>
	<td></td>
	<td></td>
</tr>
<tr>
	<td nowrap>escapeXml</td>
	<td>value の<br>&amp; , &lt; , &gt; , &quot; , &#39;<br>を<br>&amp;amp; , &amp;lt; , &amp;gt; , &amp;quot; , &amp;#39;<br>に置換する。</td>
	<td></td>
	<td>論理値</td>
	<td>true</td>
</tr>
<tr>
	<td nowrap>escapeWhitespace</td>
	<td>value の<br>CR , LF , TAB文字<br>を<br>&amp;#xd; , &amp;#xa; , &amp;#x9;<br>に置換する。</td>
	<td></td>
	<td>論理値</td>
	<td>false</td>
</tr>
<tr>
	<td nowrap>escapeEol</td>
	<td>value の改行コード (CRLF, CR, LF) を<br>br タグに置換する。</td>
	<td></td>
	<td>論理値</td>
	<td>true</td>
</tr>
</tbody>
</table>


<h3>制御系</h3>

<h4><a name="for"></a>■for プロセッサ <span class="to_toc">(<a href="#toc" title="目次へ">↑目次へ</a>)</span></h4>
<P>タグのボディが有効です。</P>
<P class="nomargin-bottom">Java の if 文のように繰り返し処理をします。</P>
<ol class="nomargin-top nomargin-bottom">
<li>最初に一度 <code>init</code> を実行してループ処理を開始します。</li>
<li>1 回の処理の最初に <code>test</code> を実行し、<code>true</code> ならループ処理を続行し、<code>false</code> ならループ処理を終了します。</li>
<li>1 回の処理の最後に <code>after</code> を実行します。</li>
</ol>
<P class="nomargin-top">無限ループを避けるため、ループ回数が上限数以上になると例外が発生します。(<code>org.seasar.maya.impl.engine.processor.TooManyLoopException</code>)</P>
<table align="center" cellpadding="5" cellspacing="2" class="tbline">
<thead><tr><th nowrap><DIV>属性名</DIV></th><th nowrap><DIV>説明</DIV></th><th><DIV>必須</DIV></th><th><DIV>値の制限</DIV></th><th><DIV>規定値</DIV></th></tr></thead>
<tbody>
<tr>
	<td nowrap>init</td>
	<td>初期化処理。</td>
	<td></td>
	<td></td>
	<td></td>
</tr>
<tr>
	<td nowrap>test</td>
	<td>判定する条件式。true ならば処理を続行。</td>
	<td><DIV align="center">○</DIV></td>
	<td>論理値</td>
	<td></td>
</tr>
<tr>
	<td nowrap>after</td>
	<td>ループ処理 1 回の後処理。</td>
	<td></td>
	<td></td>
	<td></td>
</tr>
<tr>
	<td nowrap>max</td>
	<td>ループ回数の上限。</td>
	<td></td>
	<td>整数値</td>
	<td>256</td>
</tr>
</tbody>
</table>

<h4><a name="forEach"></a>■forEach プロセッサ <span class="to_toc">(<a href="#toc" title="目次へ">↑目次へ</a>)</span></h4>
<P>タグのボディが有効です。</P>
<P>items の値を繰り返し処理します。現在の要素は var 属性で指定した名前の変数に格納され、繰り返し回数は index 属性で指定した名前の変数に格納されます (0 から始まります)。</p>
<p>items には java.util.Collection、java.util.Iterator、java.util.Enumeration、java.util.Map を実装したものと、配列を使えます。Iterator、Enumeration、配列はそのままの順番で処理します。Collection は iterator メソッドで取得した Iterator の順番で処理します。</p>
<p>Map は entrySet メソッドで取得した Set を利用し、Collection の処理に準じます。そのため Map を処理する場合には、要素は key と value の 2 つのプロパティを持ちます。</p>
<p>items が null の場合は長さ 0 の配列として処理します。以上のもの以外を items に渡すと、長さ 1 の配列として処理します。</p>
<table align="center" cellpadding="5" cellspacing="2" class="tbline">
<thead><tr><th nowrap><DIV>属性名</DIV></th><th nowrap><DIV>説明</DIV></th><th><DIV>必須</DIV></th><th><DIV>値の制限</DIV></th><th><DIV>規定値</DIV></th></tr></thead>
<tbody>
<tr>
	<td nowrap>items</td>
	<td>繰り返し処理する値。</td>
	<td><DIV align="center">○</DIV></td>
	<td>java.util.Collection,<br>java.util.Iterator,<br>java.util.Enumeration,<br>java.util.Map,<br>配列</td>
	<td></td>
</tr>
<tr>
	<td nowrap>var</td>
	<td>繰り返しの現在要素の変数名。</td>
	<td><DIV align="center">○</DIV></td>
	<td>文字列</td>
	<td></td>
</tr>
<tr>
	<td nowrap>index</td>
	<td>繰り返し回数の変数名。(0 開始)</td>
	<td></td>
	<td>文字列</td>
	<td></td>
</tr>
</tbody>
</table>

<h4><a name="if"></a>■if プロセッサ <span class="to_toc">(<a href="#toc" title="目次へ">↑目次へ</a>)</span></h4>
<P>タグのボディが有効です。</P>
<P><code>test</code> の値が <code>true</code> の場合のみボディを処理します。</P>
<table align="center" cellpadding="5" cellspacing="2" class="tbline">
<thead><tr><th nowrap><DIV>属性名</DIV></th><th nowrap><DIV>説明</DIV></th><th><DIV>必須</DIV></th><th><DIV>値の制限</DIV></th><th><DIV>規定値</DIV></th></tr></thead>
<tbody>
<tr>
	<td nowrap>test</td>
	<td nowrap>判定する条件式。true ならば有効。</td>
	<td><DIV align="center">○</DIV></td>
	<td>論理値</td>
	<td></td>
</tr>
</tbody>
</table>

<h4><a name="with"></a>■with プロセッサ <span class="to_toc">(<a href="#toc" title="目次へ">↑目次へ</a>)</span></h4>
<P>タグのボディが有効です。</P>
<P>with プロセッサ自体は何もしません。複数のプロセッサをグルーピングするために使います。</P>


<h3>コンポーネント系</h3>

<h4><a name="doBase"></a>■doBase プロセッサ <span class="to_toc">(<a href="#toc" title="目次へ">↑目次へ</a>)</span></h4>
<h5>・コンポーネントで使う場合</h5>
<P class="nomargin-top">コンポーネントを使う元テンプレートのタグのボディを処理します。</P>
<h5>・レイアウトを利用するテンプレートで使う場合</h5>
<P class="nomargin-top">レイアウトの insert のタグのボディを処理します。</P>

<h4><a name="doBody"></a>■doBody プロセッサ <span class="to_toc">(<a href="#toc" title="目次へ">↑目次へ</a>)</span></h4>
<P class="nomargin-bottom">通常は利用しません。</P>
<P>割り当てられたタグのボディを処理します。for プロセッサなどタグのボディが有効なプロセッサで動作します。通常は明示的に使用することはありませんが、Mayaa ファイル側のボディに attribute 以外のプロセッサや空白 (タブ文字、改行を含む) 以外の文字列を記述した場合、doBody を使用しなければタグのボディが処理されません。</P>

<h4><a name="doRender"></a>■doRender プロセッサ <span class="to_toc">(<a href="#toc" title="目次へ">↑目次へ</a>)</span></h4>
<h5>・コンポーネントを定義する場合</h5>
<P class="nomargin-top">割り当てられたタグをコンポーネントとして定義します。名前は同じテンプレート上で重複しないように付けてください。</P>
<table align="center" cellpadding="5" cellspacing="2" class="tbline">
<thead><tr><th nowrap><DIV>属性名</DIV></th><th nowrap><DIV>説明</DIV></th><th><DIV>必須</DIV></th><th><DIV>値の制限</DIV></th><th><DIV>規定値</DIV></th></tr></thead>
<tbody>
<tr>
	<td>name</td>
	<td>コンポーネントの名前。</td>
	<td></td>
	<td>文字列</td>
	<td>"" (空文字列)</td>
</tr>
</tbody>
</table>
<h5>・レイアウトを利用する場合</h5>
<P class="nomargin-top">レイアウトの insert に渡す部分を定義します。</P>
<table align="center" cellpadding="5" cellspacing="2" class="tbline">
<thead><tr><th nowrap><DIV>属性名</DIV></th><th nowrap><DIV>説明</DIV></th><th><DIV>必須</DIV></th><th><DIV>値の制限</DIV></th><th><DIV>規定値</DIV></th></tr></thead>
<tbody>
<tr>
	<td>name</td>
	<td>レイアウトの insert 名。</td>
	<td></td>
	<td>文字列</td>
	<td>"" (空文字列)</td>
</tr>
</tbody>
</table>

<h4><a name="insert"></a>■insert プロセッサ <span class="to_toc">(<a href="#toc" title="目次へ">↑目次へ</a>)</span></h4>
<h5>・コンポーネントを使う場合</h5>
<P class="nomargin-top">指定したパスのコンポーネントを割り当てます。</P>
<table align="center" cellpadding="5" cellspacing="2" class="tbline">
<thead><tr><th nowrap><DIV>属性名</DIV></th><th nowrap><DIV>説明</DIV></th><th><DIV>必須</DIV></th><th><DIV>値の制限</DIV></th><th><DIV>規定値</DIV></th></tr></thead>
<tbody>
<tr>
	<td>path</td>
	<td>コンポーネントのパス。</td>
	<td><DIV align="center">○</DIV></td>
	<td>文字列</td>
	<td></td>
</tr>
<tr>
	<td>name</td>
	<td>コンポーネントの名前。</td>
	<td></td>
	<td>文字列</td>
	<td>"" (空文字列)</td>
</tr>
</tbody>
</table>
<h5>・レイアウトを定義する場合</h5>
<P class="nomargin-top">extends しているテンプレートの名前が一致する doRender を割り当てます。</P>
<table align="center" cellpadding="5" cellspacing="2" class="tbline">
<thead><tr><th nowrap><DIV>属性名</DIV></th><th nowrap><DIV>説明</DIV></th><th><DIV>必須</DIV></th><th><DIV>値の制限</DIV></th><th><DIV>規定値</DIV></th></tr></thead>
<tbody>
<tr>
	<td>name</td>
	<td>レイアウトの insert 名。</td>
	<td></td>
	<td>文字列</td>
	<td>"" (空文字列)</td>
</tr>
</tbody>
</table>


<h3>その他</h3>

<h4><a name="exec"></a>■exec プロセッサ <span class="to_toc">(<a href="#toc" title="目次へ">↑目次へ</a>)</span></h4>
<P>スクリプトを実行するために使います。script、srcの両方に指定された場合、srcから先に実行されます。</P>
<table width="90%" align="center" cellpadding="5" cellspacing="2" class="tbline">
<thead><tr><th nowrap><DIV>属性名</DIV></th><th nowrap><DIV>説明</DIV></th><th><DIV>必須</DIV></th><th><DIV>値の制限</DIV></th><th><DIV>規定値</DIV></th></tr></thead>
<tbody>
<tr>
	<td>script</td>
	<td>実行するスクリプト。</td>
	<td></td>
	<td></td>
	<td></td>
</tr>
<tr>
	<td>src</td>
	<td>実行する外部 JavaScript ファイルのパス。</td>
	<td></td>
	<td>文字列</td>
	<td></td>
</tr>
<tr>
	<td>encoding</td>
	<td>src で指定したファイルを読み込むときの<br>文字エンコーディング。</td>
	<td></td>
	<td>Java文字セット名</td>
	<td>file.encoding<br>or UTF-8</td>
</tr>
</tbody>
</table>

<h4><a name="ignore"></a>■ignore タグ <span class="to_toc">(<a href="#toc" title="目次へ">↑目次へ</a>)</span></h4>
<P>割り当てた id を処理対象外にします。(ignore はプロセッサではなくエンジン機能ですが、利用の仕方に違いはありません)</P>

<h4><a name="null"></a>■null タグ <span class="to_toc">(<a href="#toc" title="目次へ">↑目次へ</a>)</span></h4>
<P>何も出力しません。(null はプロセッサではなくエンジン機能ですが、利用の仕方に違いはありません)</P>


<DIV class="navi"><a href="#top">↑このページのトップへ</a></DIV>

</DIV>
<DIV class="copyrights" align="center">
<IMG src="../images/copyrights.gif" alt="Copyright (c) 2004-2006 the Seasar Foundation and others. all rights reserved." width="760" height="20">
</DIV>
</DIV>
</BODY>
</HTML>
