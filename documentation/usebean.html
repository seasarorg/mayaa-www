<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html lang="ja">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
    <title>Maya : Documentation : 1-3. どのように使うのか</title>
    <link rel="STYLESHEET" href="./maya.css" type="text/css">
</head>
<body>
<div class="header">
<div>Maya : JavaServer Templates</div>
</div>

<div class="navi">
<a href="./install.html">←インストールしよう</a>
<a href="./index.html">↑index</a>
<a href="./hello.html">最初の一歩→</a>
</div>

<div class="main">

<h1>1-3. どのように使うのか</h1>

<p>チュートリアルに進む前に、簡単な動作サンプルを見て雰囲気をつかみましょう。細かい内容については、チュートリアルで順番に説明していきます。</p>
<p>実際に使うときは Servlet で HttpServletRequest に JavaBean をセットし、Maya へ forward して画面を表示する使い方が多いでしょう。ここでは話を簡単にするため、Maya だけで済ませてしまいます。</p>


<h2>JavaBean の内容を表示する</h2>

<p>ここで使う JavaBean は <code>example.MyBean</code> です。値はインスタンス生成時にセットしてしまいます。</p>

<pre>
<code>MyBean.java</code>
<div class="file">package example;

import java.math.BigDecimal;
import java.util.Date;

public class MyBean {

    private int _id = <strong>1000</strong>;

    private String _name = <strong>"MyBean name"</strong>;

    private BigDecimal _decimal = <strong>new BigDecimal("12.345")</strong>;

    private Date _timestamp = <strong>new Date()</strong>;

    // setter, getter 省略
</div></pre>

<p>この JavaBean を表示するサンプルは次の通りです。usebean.maya の 5 行目で request の属性として MyBean のインスタンスをセットし、それを画面に表示しています。</p>

<pre>
<code>usebean.html</code>
<div class="file">&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;use bean&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Use bean&lt;/h1&gt;
    &lt;table border="1"&gt;
    &lt;tr&gt;
        &lt;th&gt;property&lt;/th&gt;
        &lt;th&gt;value&lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;id&lt;/td&gt;
        &lt;td&gt;<strong>&lt;span id="id"&gt;10 dummy&lt;/span&gt</strong>;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;name&lt;/td&gt;
        &lt;td&gt;<strong>&lt;span id="name"&gt;dummy name&lt;/span&gt;</strong>&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;decimal&lt;/td&gt;
        &lt;td&gt;<strong>&lt;span id="decimal"&gt;1.2 dummy&lt;/span&gt;</strong>&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;timestamp&lt;/td&gt;
        &lt;td&gt;<strong>&lt;span id="timestamp"&gt;1970/1/1 dummy&lt;/span&gt;</strong>&lt;/td&gt;
    &lt;/tr&gt;
    &lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;</div>
<code>usebean.maya</code>
<div class="file">&lt;?xml version="1.0" encoding="ISO-8859-1"?&gt;
&lt;m:maya xmlns:m="http://maya.seasar.org"
        xmlns:fmt="http://java.sun.com/jsp/jstl/fmt"&gt;
    &lt;m:beforeRender&gt;
        request.setAttribute('bean', new Packages.example.MyBean());
    &lt;/m:beforeRender&gt;

    &lt;m:write id="id" value="<strong>&#36;{ bean.id }</strong>" /&gt;
    &lt;m:write id="name" value="<strong>&#36;{ bean.name }</strong>" /&gt;
    &lt;fmt:formatNumber m:id="decimal" value="<strong>&#36;{ bean.decimal }</strong>" /&gt;
    &lt;fmt:formatDate m:id="timestamp" value="<strong>&#36;{ bean.timestamp }</strong>" /&gt;

&lt;/m:maya&gt;</div></pre>

<p>これらのファイルはあらかじめパッケージに含まれています。ブラウザで <code><a href="http://localhost:8080/maya/usebean.html" target="_blank">http://localhost:8080/maya/usebean.html</a></code> にアクセスしてみましょう。</p>

<pre>
実行結果 (改行などは実際の実行結果と異なります)
<div class="file">&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;use bean&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Use bean&lt;/h1&gt;
    &lt;table border="1"&gt;
    &lt;tr&gt;
        &lt;th&gt;property&lt;/th&gt;
        &lt;th&gt;value&lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;id&lt;/td&gt;
        &lt;td&gt;<strong>1000</strong>&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;name&lt;/td&gt;
        &lt;td&gt;<strong>MyBean name</strong>&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;decimal&lt;/td&gt;
        &lt;td&gt;<strong>12.345</strong>&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;timestamp&lt;/td&gt;
        &lt;td&gt;<strong>2005/11/14</strong>&lt;/td&gt;
    &lt;/tr&gt;
    &lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;</div></pre>

<p>テンプレートに JavaBean の内容を埋め込んだページが表示されました。それではテンプレートや .maya ファイルの書き方をチュートリアルをたどりながら見ていきましょう。</p>


</div>

<div class="navi">
<a href="./install.html">←インストールしよう</a>
<a href="./index.html">↑index</a>
<a href="./hello.html">最初の一歩→</a>
</div>

<div class="footer">
&copy;2004-2005, The Seasar Foundation and the others, all rights reserved.
</div>

</body>
</html>
