<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="ja">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Release Note - JavaServer Templates &quot;Mayaa&quot;</title>
  <link href="../css/base.css" rel="stylesheet" type="text/css">
  <link href="../css/menu_contents.css" rel="stylesheet" type="text/css">
</head>

<body leftmargin="0" topmargin="0" marginwidth="0" marginheight="0" class="background">

<div align="center"><img src="../images/topbar.gif" width="760" height="4"></div>

<div align="center">
  <div class="contentslogo">
    <a href="../index.html" id="menu08"><img src="../images/logo.gif" alt="Mayaa JavaServer Template" width="430" height="48"></a><img src="../images/topstripe.gif" width="330" height="48"></div>
  <div class="menudown">
    <a href="../about/index.html" id="menu01"><img src="images/menu_about.gif" width="125" height="55" border="0"></a><img src="images/menu_div.gif" width="1" height="55"><a href="../news/index.html" id="menu02"><img src="images/menu_news.gif" alt="News" width="126" height="55" border="0"></a><img src="images/menu_div.gif" width="1" height="55"><a href="../documentation/index.html" id="menu03"><img src="images/menu_doc.gif" alt="Documentation" width="126" height="55"></a><img src="images/menu_div.gif" width="1" height="55"><img src="images/menu_down_o.gif" width="126" height="55"><img src="images/menu_div.gif" width="1" height="55"><a href="../subprojects/index.html" id="menu05"><img src="images/menu_subpro.gif" alt="SubProjects" width="126" height="55"></a><img src="images/menu_div.gif" width="1" height="55"><a href="../support/index.html" id="menu06"><img src="images/menu_support.gif" alt="Support" width="126" height="55"></a>
  </div>
</div>


<div class="maincontents">
  <div id="contentsleft">
    <img src="../images/arrow02.gif" align="absmiddle"><a href="../index.html" class="text11px">Top</a>
    <div class="sidemenu"><a href="index.html#new">最新のリリース</a></div>
    <div class="sidemenu"><a href="index.html#changelog">変更履歴</a></div>
    <div class="sidemenu"><a href="index.html#sample">サンプル</a></div>
    <div class="sidemenu"><a href="index.html#past">過去のリリース</a></div>
    <div class="sidemenu"><a href="index.html#source">ソースコード</a></div>
    <div class="sidemenu"><a href="index.html#maven2">Maven2からの利用</a></div>
  </div>

  <div id="contentsright">

    <h1>Release Note</h1>

    <h3>過去の変更履歴</h3>


    <h4><a id="ver1.1.9" name="ver1.1.9"></a>変更点 1.1.8 -> 1.1.9 (2007/04/30)</h4>
    <ul>
      <li class="fix"><a href="https://www.seasar.org/issues/browse/MAYAA-25">JIRA[MAYAA-25]</a> Deserialize時にresolvePrefixで mayaa.seasar.orgのnamespaceの親参照でNullPointerExceptionが発生する問題に対応しました。</li>
      <li class="enhance">InformalPropertyAcceptableに型指定メソッド名を変更しました。古いメソッド名はdeprecatedとしました。</li>
      <li class="enhance">VirtualPropertyAcceptable#addVirtualProperty()の第2引数をjava.lang.Objectからjava.io.Serializableに変更しました。また、VirtualPropertyに型定義が必須となるよう変更しました。</li>
      <li class="enhance">InsertProcessorでVirtualPropertyを使えるよう変更しました。これにより、コンポーネントをMLDに定義する際にrequired指定などができるようになりました。ただし、VirtualPropertyもInformalPropertyとして扱います。</li>
      <li class="enhance"><a href="https://www.seasar.org/issues/browse/MAYAA-26">JIRA[MAYAA-26]</a> Mayaaファイル内のCDATAはノードと見なさないよう変更しました。ボディとして直接  を書いた場合、その内側に CDATA 宣言をできるようになりました。(例: &#36;{ &lt;![CDATA[ '&lt;...&gt;' ]]&gt; } → '&lt;...&gt;')</li>
      <li class="enhance">var 無指定で宣言される変数のスコープをJavaScript Nativeルートではなく、最も外側のpageスコープとしました。これまでのように、JavaScript Nativeルートを指定したい場合（共通的なもの）は、__global__ という予約語のスコープを使うことができます。</li>
      <li class="fix">var 無指定対応で、委譲オブジェクトに存在するが自身に存在しないものを取得しようとして連鎖しStackOverFlowになる不具合を修正しました。</li>
    </ul>

    <h4><a id="ver1.1.8" name="ver1.1.8"></a>変更点 1.1.7 -> 1.1.8 (2007/04/08)</h4>
    <ul>
      <li class="fix">エラーページでArrayIndexOutOfBoundsExceptionが発生する問題を修正しました。</li>
      <li class="enhance">プロセッサの必須属性を空文字として定義していた場合は、属性の定義がない場合と同じ扱いのエラーとしました。</li>
      <li class="fix">attributeプロセッサのvalueを指定しないことで属性値なしの出力を可能にしました。旧仕様のHTMLの CHECKED SELECTED や、SGML用途に使用できます。ただし非推奨機能としていますのでデフォルトで有効になりません。この機能を有効にするには、標準プロセッサ定義である mayaa.mld を直接編集して、attributeのvalue属性のrequired="true"を除外する必要があります。</li>
      <li class="enhance">論理値の属性に対して、論理値とならない設定がされている場合にビルドエラーとしました。</li>
      <li class="enhance">writeプロセッサを機能拡張しました。<br>・value属性以外に、ボディで書き表すことができるようにしました。両方指定した場合は valueが優先されます。<br>・value属性内から、bodyTextというwriteプロセッサ専用の値が利用できます。bodyTextを参照すると、writeプロセッサのボディ内容が得られます。writeプロセッサがボディを持たない場合は、対象のHTMLテンプレート内容となります。</li>
      <li class="enhance">insertプロセッサのpathの指定にスクリプトが使えるようになりました。これにより実行時に動的にコンポーネントを差し替えることが可能になります。</li>
      <li class="fix"><a href="https://www.seasar.org/issues/browse/MAYAA-23">JIRA[MAYAA-23]</a> echoでの属性参照、JSP カスタムタグでの自動属性セットでテンプレートの特殊文字エスケープが解決されない問題を修正しました。</li>
      <li class="enhance">未定義の識別子を参照すると例外になる問題を解消しました。これまでは、if (識別子 == undefined) といった式が例外が起きないようにするには、beforeRenderなどで、var 識別子; のように予め定義する必要がありました。クライアントJavaScriptと同様の扱いとなるように、NativeJavaScriptエンジンの層でも見つからない識別子に対しては、var 識別子 = undefined としたものと同等の扱いとしました。</li>
      <li class="enhance">識別子が予約語とぶつかってしまう場合にその識別子を参照するためのスコープを用意しました。スコープ名は "_" で、_['class'] のように利用します。参照順は 現在位置からpageまで、request、session、applicationです。StandardScopeを変更している場合はそれに準じます。</li>
      <li class="tune">XPathMatchesInjectionResolverがあるだけでビルドにかかる時間を軽減しました。</li>
    </ul>


    <h4><a id="ver1.1.7" name="ver1.1.7"></a>変更点 1.1.6 -> 1.1.7 (2007/03/08)</h4>
    <ul>
      <li class="fix"><a href="https://www.seasar.org/issues/browse/MAYAA-17">JIRA[MAYAA-17]</a> echoをバインディングしたタグでパスの自動調整が効かない問題を修正しました。</li>
      <li class="fix"><a href="https://www.seasar.org/issues/browse/MAYAA-19">JIRA[MAYAA-19]</a> xpathのfunctionが使用できない問題を修正しました。</li>
      <li class="fix">XHTMLの場合かつreplace="false"かm:attributeのいずれかを使っていた場合に、EMPTY なタグでも閉じタグを出力していた問題を修正しました。</li>
      <li class="fix"><a href="https://www.seasar.org/issues/browse/MAYAA-18">JIRA[MAYAA-18]</a> echo, elementを複数使う場合のcomponent再帰呼び出しで上手くレンダリングされない問題を修正しました。</li>
      <li class="fix">htmlタグやbodyタグのないテンプレートの場合、出力にhtmlタグなどが自動的に追加されてしまう問題を修正しました。</li>
      <li class="fix"><a href="https://www.seasar.org/issues/browse/MAYAA-21">JIRA[MAYAA-21]</a> Specification#kill()が呼ばれるタイミングでdeadlockが発生する問題を修正しました。</li>
      <li class="fix"><a href="https://www.seasar.org/issues/browse/MAYAA-22">JIRA[MAYAA-22]</a> GCが頻繁に発生する状況でIllegalStateExceptionが発生する問題を修正しました。</li>
      <li class="enhance">APIのTemplateProcessor#kill(), NodeTreeWalker#kill() をdeprecatedにしました。同様の処理をおこないたい場合はObject#finalize()で実装してください。</li>
      <li class="enhance">ビルド結果キャッシュのファイル名規則を変更しました。ディレクトリ名の区切りを.(ピリオド)にして単一のファイル名にしていたところを、`(バッククォート)で区切るようにしました。</li>
      <li class="enhance">/default.mayaaを利用するリクエスト(/default.htmlへのアクセス)があった場合、内部エラーではなくPageNotFoundExceptionが発生するようにしました。この際、リクエストがあったことをdebugレベルでログ出力します。(/default.mayaaの名前は設定に準じます)</li>
    </ul>
    <h4><a id="ver1.1.6" name="ver1.1.6"></a>変更点 1.1.5 -> 1.1.6 (2007/01/14)</h4>
    <ul>
      <li>warを展開しない状態でもweb.xmlのtaglib-locationが有効になるようにしました。(/WEB-INF/foo.tldの形式)</li>
      <li>commons-loggingを1.1から1.0.4に戻しました。1.1はLog4Jと一緒に使うと undeploy時にNullPointerExceptionが発生することがあります。</li>
      <li>InsertProcessorでpathに"/"始まりでも"./"始まりでもないパスを指定した場合にページキャッシュが効かない問題を修正しました。</li>
      <li>escapeXmlの処理でシングルクォーテーションをエスケープしないよう変更しました。</li>
      <li>自動ビルド時にコンテキストパスが必要となる場合があるため、設定で指定できるようにしました。ServiceProviderファイルのEngine設定の"autoBuild.contextPath"パラメータです。デフォルトは"/"。</li>
      <li>同梱するJaxenのバージョンを1.1にアップデートしました。</li>
      <li>AutoPageBuilderのファイル名フィルタで、正規表現の場合にファイル名のみとマッチングしていたところをフルパスとマッチングするよう変更しました。</li>
      <li>Engineを明示的に破棄するメソッド"destroy()"を追加しました。destroy()が呼ばれた後のEngineの動作は保証しません。</li>
      <li>コマンドラインから実行してレンダリング結果ファイルを生成するFileGeneratorを追加しました。</li>
      <li>グローバル関数"throwJava"を追加しました。レンダリング中にスクリプトからJavaの例外を投げたい場合に使用します。(ServiceCycle#throwJava(Throwable)を追加)</li>
      <li>m:replace="false"としたテンプレート側タグのid属性にスクリプトを指定していた場合に属性が出力されない問題を修正しました。</li>
    </ul>

    <h4><a id="ver1.1.5" name="ver1.1.5"></a>変更点 1.1.4 -> 1.1.5 (2006/12/07)</h4>
    <ul>
      <li>同梱するRhinoのバージョンを1.6-r5にアップデートしました。</li>
      <li>MayaaServletのdestroyで例外が発生する問題を修正しました。</li>
    </ul>

    <h4><a id="ver1.1.4" name="ver1.1.4"></a>変更点 1.1.3 -> 1.1.4 (2006/12/05)</h4>
    <ul>
      <li>1.1.3での変更、"Mayaaのjarを複数Webアプリで共有した場合でも正常に動作するよう修正" の内容を削除しました。WAS6.1 で正常に動作しない場合があるためです。また、mayaa-webwork2 が動作しない問題も解決します。</li>
      <li><a href="https://www.seasar.org/issues/browse/MAYAA-8">JIRA[MAYAA-8]</a> WebSphereでundeploy時にMayaaのjarファイルが削除されない問題を修正しました。</li>
      <li>書き込み可能なSourceDescriptorを定義できるようにしました。</li>
      <li>標準のエラー画面に表示する情報を増やしました。</li>
      <li>標準のエラー画面をMETA-INF/java.lang.Throwable.htmlのみにしました。</li>
      <li>同梱するJaxenのバージョンを1.1-beta-11にアップデートしました。</li>
      <li>ClassLoader#getResourceAsStream()をURLConnectionに変更しました。</li>
      <li>URLConnectionのキャッシュを使うかどうかをシステムプロパティで設定できるようにしました。デフォルトはfalse(キャッシュを使わない)です。プロパティ名は"org.seasar.mayaa.useURLCache"、IOUtilでのみ使用しています。設定方法は変更する可能性があります。</li>
    </ul>

    <h4><a id="ver1.1.3" name="ver1.1.3"></a>変更点 1.1.2 -> 1.1.3 (2006/11/23)</h4>
    <ul>
      <li>Mayaaのjarを複数Webアプリで共有した場合でも正常に動作するよう修正しました。</li>
      <li>PathAdjusterが適用されない場合があるのを修正しました。</li>
      <li><a href="https://www.seasar.org/issues/browse/MAYAA-7">JIRA[MAYAA-7]</a> Jarの内容を参照するとき、URLConnectionのキャッシュを使わないよう修正しました。。Mayaaを含むwarをdeploy解除した場合などに、Mayaaが参照するリソース(tldなど)を含むjarファイルが削除されない問題の対処となります。</li>
      <li><a href="https://www.seasar.org/issues/browse/MAYAA-13">JIRA[MAYAA-13]</a> レイアウト共有機能で、レイアウト側のhtml, mayaaを更新しても反映されない問題を修正しました。</li>
      <li>テンプレートに文字セット指定がされていない場合、UTF-8と見なすように変更しました。</li>
      <li>JavaScriptからJavaに数値を渡すとき、型情報があるならそれを維持するようにしました。</li>
    </ul>

    <h4><a id="ver1.1.2" name="ver1.1.2"></a>変更点 1.1.1 -> 1.1.2 (2006/09/27)</h4>
    <ul>
      <li>ソースコードの文字セットをUTF-8に変更しました。</li>
      <li><a href="https://www.seasar.org/issues/browse/MAYAA-6">JIRA[MAYAA-6]</a> elementプロセッサ、echoプロセッサ、およびテンプレート上の属性において、「属性がnullの場合に出力しない」という処理で空文字列も出力しないようになっていた問題を修正しました。</li>
      <li>jaxenを1.1-beta-10にしました。</li>
      <li>エンジン設定にrequestedSuffixEnabledを追加しました。デフォルトはfalseで、trueにするとsuffix指定のアクセス(例:index$ja.html)が有効になります。suffix指定アクセスはm:templateSuffixの指定よりも優先されます。1.1.1まではデフォルトで有効な状態でした。アップグレードの際はご注意ください。</li>
    </ul>

    <h4><a id="ver1.1.1" name="ver1.1.1"></a>変更点 1.1.0 -> 1.1.1 (2006/09/02)</h4>
    <ul>
      <li><a href="https://www.seasar.org/issues/browse/MAYAA-4">JIRA[MAYAA-4]</a> m:injectでインジェクションしたもののnamespaceを持つ属性を出力しないよう修正しました。</li>
      <li>ページのビルド結果をserializeする途中でWebアプリケーションを終了させたときに例外が出る問題を修正しました。</li>
      <li>セッションが既に無効化されている場合に例外が発生する問題を修正しました。</li>
      <li>SpecificationCacheのGCログをINFOレベルからDEBUGレベルに変更しました。</li>
    </ul>
    <h4><a id="ver1.0.7" name="ver1.0.7"></a>変更点 1.0.6 -> 1.0.7 (2006/09/02)</h4>
    <ul>
      <li><a href="https://www.seasar.org/issues/browse/MAYAA-3">JIRA[MAYAA-3]</a> テンプレートにprefix付きの属性を書いた場合、その属性が出力されない問題を修正しました。</li>
      <li>セッションが既に無効化されている場合に例外が発生する問題を修正しました。</li>
    </ul>

    <h4><a id="ver1.1.0" name="ver1.1.0"></a>変更点 1.1.0-beta6 -> 1.1.0 (2006/08/13)</h4>
    <ul>
      <li><a href="https://www.seasar.org/issues/browse/MAYAA-1">JIRA[MAYAA-1]</a> ビルドした結果をログに出力する機能を追加しました。デフォルトは無効です。有効にするにはServiceProvider設定でEngineのパラメータに"dumpEnabled"を追加し、値に"true"または"false"を指定してください。現状ではテンプレート機能、コンポーネント機能には対応していません。</li>
      <li>JSP2.0のDynamic Attributeをサポートしました。</li>
      <li>１回のリクエスト中で同じページに一定回数以上forwardした場合に例外を投げるようにしました。この例外はエラーハンドラで扱えません。ServiceProvider設定でEngineのパラメータに"forwardLimit"を追加し、値に上限回数を指定してください。デフォルトは"10"です。</li>
      <li>パスの自動調整機能でinputタグのsrc属性が対象になっていなかったのを修正しました。その他いくつかの属性も対象に追加しました。</li>
      <li>XMLをテンプレートにした場合にデフォルト名前空間指定で例外が出る問題を修正しました。</li>
      <li>Maven2 から利用できるようになりました。<br>groupId: org.seasar.mayaa<br>artifactId: mayaa<br>詳しくは Wiki をご覧ください。(<a href="http://www.seasar.org/wiki/index.php?Maven2RepoRemote">http://www.seasar.org/wiki/index.php?Maven2RepoRemote</a>)</li>
    </ul>

    <h4><a id="ver1.1.0-beta6" name="ver1.1.0-beta6"></a>変更点 1.1.0-beta5 -> 1.1.0-beta6 (2006/07/30)</h4>
    <p>バグ修正などをおこなった後、正式版になる予定です。</p>
    <p>依存ライブラリに変更があります。追加: commons-collections-3.1.jar, バージョンアップ: commons-logging-1.1.jar</p>
    <ul>
      <li>echoプロセッサにname属性を追加し、タグ名を変更できるようにしました。</li>
      <li>定義されていないprefixが見つかった場合に例外を出さないようにしました。</li>
      <li>直接出力となるスクリプトの処理で、処理結果がnullの場合に空文字列を出力するようにしました。</li>
      <li>標準ではPageNotFoundExceptionのスタックトレースを出力しないよう変更しました。INFOレベルで"Page not found: /foo.html"の形(getMessage())のログを出力します。</li>
      <li>例外ハンドラページからforwardやredirectができない問題を修正しました。</li>
      <li>SessionScope#getUnderlyingContext()を呼び出したときにSessionオブジェクトを生成しないよう修正しました。Sessionオブジェクトがない場合はnullを返します。</li>
      <li>beforeRenderおよびafterRenderでbindingを使えるようにしました。</li>
      <li>m:attributeのvalueにがnullの場合、属性を削除するようにしました。</li>
      <li>コンポーネントを再帰的に使用するとき、forEachが正常に動作しないのを修正しました。</li>
      <li>コンポーネントから更にコンポーネントを呼び出すとき、同じbinding変数名を再定義できるように修正しました。</li>
      <li>ページを再読込したときに古いページが解放されない問題を修正しました。</li>
      <li>VariableInfo の NESTED が正常に動作しない問題を修正しました。</li>
      <li>メモリ使用量を削減しました。</li>
      <li>描画速度を向上させました。</li>
      <li>ページのビルド結果をserialize/deserializeできるようにしました。WEB-INF/.mayaaSpecCacheフォルダ以下にserファイルが作成されます。デフォルトは無効です。ServiceProvider設定でEngineのパラメータに"pageSerialize"を追加し、値に"true"または"false"を指定してください。</li>
      <li>ページのビルド結果をgcの回収対象にするまでの回数を指定できるようにしました。デフォルトでは5回目の解放要求で回収対象になります。ServiceProvider設定でEngineのパラメータに"surviveLimit"を追加し、値に解放要求を無視する回数を整数で指定してください。</li>
      <li>アプリケーション起動時にすべてのページを自動的にビルドする機能を追加しました。デフォルトは無効です。ServiceProvider設定でEngineのパラメータに"autoBuild"を追加し、値に"true"または"false"を指定してください。</li>
    </ul>

    <h4><a id="ver1.0.6" name="ver1.0.6"></a>変更点 1.0.5 -> 1.0.6 (2006/07/30)</h4>
    <p>1.0 系の機能追加はこのバージョンで終わりとし、以後は 1.1 系を主とします。</p>
    <ul>
      <li>定義されていないprefixが見つかった場合に例外を出さないようにしました。</li>
      <li>直接出力となるスクリプトの処理で、処理結果がnullの場合に空文字列を出力するようにしました。</li>
      <li>標準ではPageNotFoundExceptionのスタックトレースを出力しないよう変更しました。INFOレベルで"Page not found: /foo.html"の形(getMessage())のログを出力します。</li>
      <li>echoプロセッサにname属性を追加し、タグ名を変更できるようにしました。</li>
      <li>例外ハンドラページからforwardやredirectができない問題を修正しました。</li>
      <li>SessionScope#getUnderlyingContext()を呼び出したときにSessionオブジェクトを生成しないよう修正しました。Sessionオブジェクトがない場合はnullを返します。</li>
    </ul>

    <h4><a id="ver1.1.0-beta5" name="ver1.1.0-beta5"></a>変更点 1.1.0-beta4 -> 1.1.0-beta5 (2006/05/28)</h4>
    <ul>
      <li>グローバル関数redirect,error後も描画処理が実行されてしまうのを修正しました。</li>
      <li>formatDateプロセッサとformatNumberプロセッサにdefault属性を追加しました。writeプロセッサ同様の仕様で、文字列あるいはStringを戻すスクリプトを書けます。</li>
      <li>PrefixMapping, PrefixAwareNameをsingletonにすることで省メモリ化しました。</li>
      <li>HTMLの場合にxmlnsが正しく出力されないのを修正しました。</li>
      <li>echoプロセッサとattributeプロセッサを組み合わせたとき、テンプレート上に存在する属性を上書きできていなかったのを修正しました。</li>
      <li>初期化時に発生する例外が他の例外を引き起こすのを修正しました。</li>
      <li>スクリプトで"page"を直接した場合、ページスコープのルートを指すよう変更しました。<br>※"page"がカレントスコープを指すことを想定して使われている場合、意図したものと動作が変わる可能性があります。現在スコープを明示したい場合は page.__current__ を使用してください。<br>※現時点では VariableInfo の NESTED が正常に動作しないという問題があります。</li>
    </ul>

    <h4><a id="ver1.0.5" name="ver1.0.5"></a>変更点 1.0.4 -> 1.0.5 (2006/05/28)</h4>
    <ul>
      <li>グローバル関数redirect,error後も描画処理が実行されてしまうのを修正しました。</li>
      <li>formatDateプロセッサとformatNumberプロセッサにdefault属性を追加しました。writeプロセッサ同様の仕様で、文字列あるいはStringを戻すスクリプトを書けます。</li>
    </ul>

    <h4><a id="ver1.1.0-beta4" name="ver1.1.0-beta4"></a>変更点 1.1.0-beta3 -> 1.1.0-beta4 (2006/05/07)</h4>
    <ul>
      <li>org.seasar.mayaa.impl.MayaaApplicationFilterを追加しました。StrutsServletなどからMayaaへforwardする場合、このFilterを通すことで初期化できます。</li>
      <li>SimpleTagをサポートしました。</li>
      <li>ディレクトリへのアクセスが"/"で終わっていない場合に、"/"を付けたパスへリダイレクトするようにしました。</li>
      <li>初期化時に発生する例外が他の例外を引き起こすのを修正しました。</li>
      <li>空要素でないタグまで空要素出力していたのを修正しました。</li>
    </ul>

    <h4><a id="ver1.0.4" name="ver1.0.4"></a>変更点 1.0.3 -> 1.0.4 (2006/05/07)</h4>
    <p>(※: 1.1.0-betaでのバグ修正を1.0.3に適用したものです。一部の機能追加を含みます。)</p>
    <ul>
      <li>EngineのdoServiceにMapを渡せるよう変更しました。渡したMapはpageスコープの初期値として格納されます。</li>
      <li>templatePathPattern, notTemplatePathPatternのいずれにもマッチしない場合の判定を、以前の通りmime-typeで判定するように戻しました。</li>
      <li>テンプレートを探す位置をカスタマイズ(WEB-INF/pageなど)した場合に、テンプレートとして扱わないリソース(cssなど)を探せない問題を修正しました。</li>
      <li>JSPカスタムタグで例外が出たときに正しく行番号を表示するよう修正しました。</li>
      <li>ServiceCycle#load (m:exec src) のスクリプトをキャッシュするよう変更しました。</li>
      <li>.mayaaファイル上に同一のm:idを複数定義した場合、Warningログを出すよう変更しました。ServiceProviderファイルでEqualsIDInjectionResolverのパラメータreportDuplicatedIDにfalseを設定すればログを出さないようにできます。</li>
      <li>何かのタグのボディ部に直接&#36;{}でスクリプトを書いた場合、そのスクリプト内のスコープがタグのスコープと同一になるよう変更しました。</li>
      <li>PageSourceFactoryのパラメータ folder と absolutePath を追加型に変更しました。複数書くことで複数のパスを有効にできます。上書きを前提として使用している場合には意図しない動作をする可能性がありますので、ご注意ください。</li>
      <li>スクリプトのブレースの数の整合性チェックをするとき、文字列内かどうかの判定をしていなかったバグを修正しました。</li>
      <li>パスの自動調整で"/"で終わるパスの場合に例外が出るのを修正しました。</li>
      <li>Mayaaファイルのタグボディとして&lt;などのエンティティ参照を書いた場合にエンティティ解決していなかったのを修正しました。このバグを前提に作られているものがある場合には正常に動作しなくなるかもしれませんのでご注意ください。</li>
      <li>jaxenを1.1-beta-8から1.1-beta-9にバージョンアップしました。</li>
      <li>org.seasar.mayaa.impl.MayaaApplicationFilterを追加しました。StrutsServletなどからMayaaへforwardする場合、このFilterを通すことで初期化できます。</li>
      <li>SimpleTagをサポートしました。</li>
      <li>ディレクトリへのアクセスが"/"で終わっていない場合に、"/"を付けたパスへリダイレクトするようにしました。</li>
      <li>初期化時に発生する例外が他の例外を引き起こすのを修正しました。</li>
      <li>空要素でないタグまで空要素出力していたのを修正しました。</li>
    </ul>

    <h4><a id="ver1.1.0-beta3" name="ver1.1.0-beta3"></a>変更点 1.1.0-beta2 -> 1.1.0-beta3 (2006/04/23)</h4>
    <ul>
      <li>.mayaaファイル上に同一のm:idを複数定義した場合、Warningログを出すよう変更しました。ServiceProviderファイルでEqualsIDInjectionResolverのパラメータreportDuplicatedIDにfalseを設定すればログを出さないようにできます。</li>
      <li>何かのタグのボディ部に直接&#36;{}でスクリプトを書いた場合、そのスクリプト内のスコープがタグのスコープと同一になるよう変更しました。</li>
      <li>PageSourceFactoryのパラメータ folder と absolutePath を追加型に変更しました。複数書くことで複数のパスを有効にできます。上書きを前提として使用している場合には意図しない動作をする可能性がありますので、ご注意ください。</li>
      <li>スクリプトのブレースの数の整合性チェックをするとき、文字列内かどうかの判定をしていなかったバグを修正しました。</li>
      <li>パスの自動調整で"/"で終わるパスの場合に例外が出るのを修正しました。</li>
      <li>Mayaaファイルのタグボディとして&lt;などのエンティティ参照を書いた場合にエンティティ解決していなかったのを修正しました。このバグを前提に作られているものがある場合には正常に動作しなくなるかもしれませんのでご注意ください。</li>
      <li>jaxenを1.1-beta-8から1.1-beta-9にバージョンアップしました。</li>
    </ul>

    <h4><a id="ver1.1.0-beta2" name="ver1.1.0-beta2"></a>変更点 1.1.0-beta1 -> 1.1.0-beta2 (2006/04/08)</h4>
    <ul>
      <li>スコープ名修飾なしの場合に走査するスコープを追加できるよう、CycleFactoryImplのパラメータにaddedStandardScopeを追加しました。org.seasar.mayaa.cycle.CycleFactoryファイルに<br>&lt;parameter name="addedStandardScope" value="スコープ名" /&gt;<br>とすることで追加できます。</li>
      <li>EngineのdoServiceにMapを渡せるよう変更しました。渡したMapはpageスコープの初期値として格納されます。</li>
      <li>templatePathPattern, notTemplatePathPatternのいずれにもマッチしない場合の判定を、以前の通りmime-typeで判定するように戻しました。</li>
      <li>テンプレートを探す位置をカスタマイズ(WEB-INF/pageなど)した場合に、テンプレートとして扱わないリソース(cssなど)を探せない問題を修正しました。</li>
      <li>JSPカスタムタグで例外が出たときに正しく行番号を表示するよう修正しました。</li>
      <li>ServiceCycle#load (m:exec src) のスクリプトをキャッシュするよう変更しました。</li>
      <li>QNameをSingletonにしてメモリを節約するよう変更しました。</li>
    </ul>

    <h4><a id="ver1.1.0-beta1" name="ver1.1.0-beta1"></a>変更点 1.0.3 -> 1.1.0-beta1 (2006/03/23)</h4>
    <ul>
      <li>実行時ツリーモデルを合理化し、静的なタグが多い場合のパフォーマンスを大幅に向上しました。</li>
    </ul>

    <h4><a id="ver1.0.3" name="ver1.0.3"></a>変更点 1.0.2 -> 1.0.3 (2006/03/19)</h4>
    <ul>
      <li>JavaScriptの戻り値がvoid (Voidではなく) の場合に例外が発生するのを修正しました。</li>
      <li>テンプレート側にxmlns:m="http://mayaa.seasar.org"を記述する場合に、この宣言がそのまま出力されてしまうのを修正しました。"http://mayaa.seasar.org"で始まる名前空間宣言はすべて出力されません。</li>
      <li>多段階のコンポーネントに同名で引数を渡すと無限ループするのを修正しました。</li>
      <li>JSPカスタムタグにテンプレートの属性値を渡す機能のうち、属性名のエイリアスを定義するときに、テンプレート側属性名としてQNameの形式でセットできるようにしました。</li>
      <li>HttpSessionオブジェクトを生成するタイミングを、setAttributeするときのみに変更しました。</li>
      <li>m:injectに記述したものがhtml,xhtml,xmlの名前空間に属する場合にはエラーログを出力するよう変更しました。</li>
    </ul>

    <h4><a id="ver1.0.2" name="ver1.0.2"></a>変更点 1.0.1 -> 1.0.2 (2006/02/26)</h4>
    <ul>
      <li>ログメッセージのシングルクォーテーション (') のエスケープをしていなかったのを修正しました。</li>
      <li>Java5.0で実行する場合にXMLパーサーに関連するログが大量に出力されるため、それらのログレベルをDEBUGに変更しました。</li>
      <li>JSPカスタムタグでdoStartTagの戻り値がEVAL_BODY_BUFFEREDの場合に、doAfterBodyでHTMLへ書き込めないバグを修正しました。</li>
      <li><a href="../documentation/jsp_template_attribute.html">JSPカスタムタグにテンプレートの属性値を渡す機能</a>を追加しました。この機能はデフォルトでは無効です。</li>
      <li><strong>アップグレード時注意</strong>：writeプロセッサのdefault属性値をエスケープ (escapeXml, escapeEol, escapeWhitespace) の対象外にしました。</li>
    </ul>

    <h4><a id="ver1.0.0" name="ver1.0.0"></a>変更点 1.0.0 -> 1.0.1 (2006/01/30)</h4>
    <ul>
      <li>予約名前空間"xml"を使った場合、名前空間"xml"を定義していない場合に例外が発生する問題を修正しました。</li>
      <li>forEachプロセッサに単純なオブジェクト以外を使うと例外が出る問題を修正しました。</li>
      <li>forEachプロセッサでスレッド再利用時にNullPointerExceptionが出る問題を修正しました。</li>
      <li>JspFactoryを受け取れなかった場合のJSPバージョンを2.0としました。</li>
      <li>ライブラリのprefixマッピングで"/"開始のときはディレクトリ存在チェックをし、存在しなければInsertに変換しないようにしました。</li>
    </ul>

    <h4><a id="ver1.0.0" name="ver1.0.0"></a>変更点 1.0.0-rc1 -> 1.0.0 (2006/01/23)</h4>
    <ul>
      <li>ServiceCycleにHTTPエラーを返すためのerror(int)とerror(int, String)を追加しました。HttpServletResponse#sendErrorに準じます。</li>
    </ul>

    <h4><a id="ver1.0.0-rc1" name="ver1.0.0-rc1"></a>変更点 1.0.0-beta3 -> 1.0.0-rc1 (2006/01/16)</h4>
    <ul>
      <li>writeプロセッサのescapeEolで、改行文字をテンプレートがHTMLの場合は&lt;br&gt;に、XHTMLの場合は&lt;br /&gt;に置き換えるよう修正しました。また、テンプレートがXMLの場合はescapeEolで何も処理しないよう変更しました。</li>
      <li>forward、redirectに現在ページからの相対パスを使えるよう変更しました。(相対パス解決をするのは"./"で始まる先頭から連続している部分のみです)</li>
      <li>MLDの定義において、タグ属性名とプロセッサ実装のプロパティ名が異なる定義をできるよう変更しました。</li>
      <li>forEachプロセッサを追加しました。</li>
      <li>formatNumberプロセッサを追加しました。</li>
      <li>formatDateプロセッサを追加しました。</li>
      <li>TemplateBuilderImplの設定のoutputWhitespaceを廃止し、代わりにoutputTemplateWhitespaceとoutputMayaaWhitespaceの2つを追加しました。<br>outputTemplateWhitespaceのデフォルト値はtrue、outputMayaaWhitespaceのデフォルト値はfalseです。これにより、デフォルト設定ではMayaaファイルにあるキャラクターノードの空白やタブ文字が出力されなくなります。</li>
      <li>EqualsIDInjectionResolverでMayaaファイルのidと一致するものを探すテンプレート上の属性を設定できるように変更しました。"{http://mayaa.seasar.org}id"は最優先かつ固定で、その次以降を指定できます。</li>
      <li>TLDなどのライブラリをすべて読み込む処理のタイミングを、初回アクセス時からMayaaServlet初期化時に変更しました。</li>
    </ul>


    <h4><a id="ver1.0.0-beta3" name="ver1.0.0-beta3"></a>変更点 1.0.0-beta2 -> 1.0.0-beta3 (2006/01/07)</h4>
    <ul>
      <li>ServletAPI 2.4用のweb.xmlをパース出来ない問題を修正しました。</li>
      <li>プロセッサのProcessorProperty型プロパティにdefaultを設定できなかったのを修正しました。</li>
      <li>writeプロセッサのescapeXmlのデフォルト値をtrueに変更しました。</li>
      <li>writeプロセッサに改行文字を&lt;br /&gt;に置換するプロパティescapeEolを追加しました。値はbooleanで、デフォルトはtrueです。</li>
      <li>レイアウトのm:extends、insertプロセッサのpathにページからの相対パスを使えるよう変更しました。(相対パス解決をするのは"./"で始まる先頭から連続している"../"のみです)</li>
      <li>スクリプトのload()メソッドとexecプロセッサのsrcにページからの相対パスを使えるよう変更しました。(相対パス解決をするのは"./"で始まる先頭から連続している"../"のみです)</li>
      <li>HTML、XHTMLのタグのパスを指定する属性のうち、"./"で始まる相対パスをサーバルートからの絶対パスに変換するよう変更しました。(相対パス解決をするのは"./"で始まる先頭から連続している"../"のみです)</li>
    </ul>


    <h4><a id="ver1.0.0-beta2" name="ver1.0.0-beta2"></a>変更点 1.0.0-beta1 -> 1.0.0-beta2 (2005/12/09)</h4>
    <ul>
      <li>Mayaaエンジン設定に「templatePathPattern」を追加しました。値として正規表現を取ります。Mayaaがテンプレートとして扱うかどうかは、この正規表現にマッチするかどうかで判定します (requestedPathと完全マッチ)。デフォルトでは設定なしで、すべてをテンプレートとして扱います。</li>
      <li>Mayaaエンジン設定に「notTemplatePathPattern」を追加しました。値として正規表現を取ります。Mayaaがテンプレートとして扱うかどうかは、この正規表現にマッチしないかどうかで判定します (requestedPathと完全マッチ)。デフォルトではパターンなしです。</li>
      <li>templatePathPattern, およびnotTemplatePathPatternは複数指定でき、後に書いた方から順番に判定されます。</li>
      <li>web.xmlのtaglib-locationにjarファイル名を書いた場合、jar内のMETA-INF/taglib.tldにtaglib-uriをマッピングするよう修正しました。(WEB-INF/libにあるjarのみです)</li>
      <li>ファイルのタイムスタンプをチェックする回数を減らし、パフォーマンスを向上させました。</li>
    </ul>


    <h4><a id="ver1.0.0-beta1-a" name="ver1.0.0-beta1-a"></a>臨時：導入 War のみ (2005/12/07)</h4>
    <ul>
      <li>導入 War のパッケージングを修正しました。context ルートにアクセスするために /samples/ を通す必要があったものを、ドキュメントどおりにアクセスできるようにしました。</li>
    </ul>


    <h4><a id="ver1.0.0-beta1" name="ver1.0.0-beta1"></a>変更点 0.9.20a -> 1.0.0-beta1 (2005/11/28)</h4>
    <ul>
      <li>HTMLのid, XHTMLのidをバインディングに使わない設定を可能にしました。</li>
      <li>スクリプトのコメント内に閉じブレース (}) を書くと整合性エラーになっていたのを修正しました。</li>
      <li>beforeRender, afterRenderのブレース整合性チェックを強化しました。</li>
      <li>テンプレートを探すパスの設定が正常に動作しないのを修正しました。</li>
      <li>テンプレートを全ファイルシステム上の指定パスから探せる設定を追加しました。org.seasar.mayaa.source.PageSourceFactoryに「absolutePath」というパラメータを設定した場合、その値をファイルシステムのパスとして扱います。</li>
      <li>Mayaaエンジン設定ファイルのパラメータに&#36;{ }で囲んだシステムプロパティを扱えるようにしました。</li>
      <li>mayaaファイルでredirectした場合、responseを一度flushしないと例外が発生していたのを修正しました。</li>
    </ul>


    <h4><a id="ver0.9.20a" name="ver0.9.20a"></a>変更点 0.9.20 -> 0.9.20a (2005/11/16)</h4>
    <ul>
      <li>プロセッサプロパティの自動設定機能は意図しない動作を引き起こす場合があるため、動作しないようにしました。</li>
    </ul>


    <h4><a id="ver0.9.20" name="ver0.9.20"></a>変更点 0.9.19 -> 0.9.20 (2005/11/16)</h4>
    <ul>
      <li>Mayaのプロダクト名をMayaaに変更しました。</li>
      <li>プロセッサの属性に書いたスクリプトの実行結果がundefinedの場合、期待型がBooleanの場合は今までどおりfalse、それ以外はnullを返すように変更しました。</li>
      <li>JSPのTagExtraInfoで指定するスクリプティング変数のスコープを正常に使えるよう修正しました。</li>
      <li>MayaaServletでrequestのCharacterEncodingをセットできるよう変更しました。ServiceProvider設定ファイルのengine/requestCharacterEncodingで指定します。mayaa-sampleで使用しています。</li>
      <li>TLDもしくはMLDに定義されているプロセッサプロパティについては、.mayaaに値の定義が無い場合、テンプレート上のノードを参照し、ノードの名前空間に属する該当する名前の属性値があれば、それを用いるように機能追加しました。</li>
    </ul>


    <h4><a id="ver0.9.19" name="ver0.9.19"></a>変更点 0.9.18 -> 0.9.19 (2005/11/10)</h4>
    <ul>
      <li>テンプレートにスクリプトを書いた場合にエンティティ解決していなかったのを修正しました。</li>
      <li>レイアウトを使う場合にホストページmayaファイルのm:noCacheが有効にならないのを修正しました。</li>
      <li>headerスコープが正常に使えないのを修正しました。</li>
    </ul>


    <h4><a id="ver0.9.18" name="ver0.9.18"></a>変更点 0.9.17 -> 0.9.18 (2005/10/28)</h4>
    <ul>
      <li>XMLをテンプレートとしたときにXML宣言が出力されないのを修正しました。</li>
      <li>レイアウト機能において、doRenderをカスケードしたページ全部を辿って探すように修正しました。</li>
      <li>WriteProcessorのdefaultプロパティにスクリプトを使えるよう変更しました。</li>
      <li>スクリプトのXMLエンティティを２重に解決していたのを修正しました。</li>
      <li>WriteProcessorにescapeWhitespaceプロパティを追加しました。escapeWhitespaceをtrueにするとCR, LF, タブ文字をそれぞれ&amp;#xd, &amp;#xa, &amp;#x9にエスケープします。</li>
      <li>AttributeProcessorのvalueにスクリプトを書いた場合、実行結果を自動的にXMLエスケープし、改行文字を空白に置き換えるよう修正しました。</li>
    </ul>


    <h4><a id="ver0.9.17" name="ver0.9.17"></a>変更点 0.9.16 -> 0.9.17 (2005/10/17)</h4>
    <ul>
      <li>MLD中のproperty定義を、propertySet定義にまとめて再利用できるようにしました。</li>
      <li>API中の名前にて、～Typeと用いてるもののうち、JavaのClass型を指すものをすべて～Classと改名しました。</li>
      <li>mayaファイル中のXMLコメント(&lt;!-- --&gt;)を処理しないようにしました。</li>
      <li>CommentProcessorでボディを処理するようにしました。HTML出力としてコメントを
       書き出したい場合、テンプレートに書くかm:commentを使うことで実現できます。</li>
      <li>ServiceCycle#loadにエンコーディング指定なしのものを追加しました。無指定の場合はUTF-8として読み込みます。</li>
      <li>サービスのファクトリ群に対し、JSFライクなマーシャル機能を実装しました。</li>
      <li>APIを変更しています。Underlyable→ContextAware, Parameterizable→ParameterAware としました。また、PositionAwareを新設し、ソース上の位置情報を全体的に取得できるようにしました。</li>
      <li>Underlyable→ContextAwareにおいて、getUnderlyingObject()メソッドをgetUnderlyingContext()と改めました。</li>
    </ul>


    <h4><a id="ver0.9.16" name="ver0.9.16"></a>変更点 0.9.15 -> 0.9.16 (2005/10/05)</h4>
    <ul>
      <li>InsertProcessorにおいて、ページをハードリファレンスで保持していたのを、SoftReferenceをもちいて参照保持するように修正しました。</li>
      <li>プロセッサプロパティのプロパティ設定メカニズムに、カスタマイズ可能な型変換機能を追加しました。</li>
      <li>XMLのハンドルユーティリティにおいて、ソースSystemIDと行番号を常に取れるようにしました。その利用で、MLDおよびTLDのパース結果において、SystemIDと行番号を例外メッセージおよびツール等で利用するために保持しています。</li>
      <li>m:rendered="true"によるエレメントの複製機能は、m:replace="false"によって発動するように変更しました。一方、m:rendered="false"と明示した場合、そのノード全体を削除するようになっています。m:replaceはデフォルトがfalse、m:renderedはデフォルトがtrueです。</li>
      <li>XHTMLのプレフィックスマッピングが適切に描画されない問題が、プロパティ設定メカニズムの変更に伴って再発していたものを修正しました。</li>
      <li>ページのスクリプトイベント（m:beforeRenderおよびm:afterRender）について、コンポーネントやレイアウト機能による複数ページが連携する際のイベント呼び出し順について、仕様を整理し、修正しました。</li>
    </ul>


    <h4><a id="ver0.9.15" name="ver0.9.15"></a>変更点 0.9.14 -> 0.9.15 (2005/09/30)</h4>
    <ul>
      <li>空の属性があるタグをレンダリングした場合に"null"が入る問題が再発したのを修正しました。</li>
      <li>テンプレートとmayaファイルをロックしないよう修正しました。</li>
      <li>テンプレートとmayaファイルを削除した場合、キャッシュを使わないように変更しました。</li>
    </ul>

    <h4><a id="ver0.9.14" name="ver0.9.14"></a>変更点 0.9.13 -> 0.9.14 (2005/09/28)</h4>
    <ul>
      <li>JSF等のミドルウェアから利用するために、描画前のデコードフェーズを実行できる機能を追加しました。</li>
      <li>JSF等のミドルウェアから利用するために、スクリプトをELライクに実行する機能を追加しました。</li>
      <li>WEBコンテナがスレッドをプールすることに起因するバグを解決しました。このバグはとても重大なものなので、以前のバージョンをご利用の場合は、すみやかにアップデートください。</li>
    </ul>


    <h4><a id="ver0.9.13" name="ver0.9.13"></a>変更点 0.9.12 -> 0.9.13 (2005/09/27)</h4>
    <ul>
      <li>テンプレートコンポーネントから自コンポーネントを呼び出すネスト構造のときに、きちんとm:doBaseを呼べるようにコールスタック処理を追加しました。</li>
      <li>ページやテンプレートのオブジェクトのキャッシュの効率を見直し、インスタンス生成の個数を減らすようにチューニングしました。</li>
      <li>テンプレートとしてXMLを使えるようにしました。</li>
      <li>m:echoプロセッサを追加しました。テンプレートに無い属性を追加することができます。テンプレートのタグにある属性の値を置き換えることができます。スクリプトから属性の名前を変数名として指定することで元の属性の値を利用できます。</li>
      <li>例外メッセージテンプレートでオリジナルノードとインジェクションノードを参照できるようにしました。</li>
      <li>「page」スコープのメソッド群がうまくJavaScript中から呼び出せないバグを修正しました。</li>
      <li>mayaノードの、m:classおよび、m:scopeを廃止しました。代わりに、より汎用なAttributeScope#newAttribute(String, Class)メソッドを追加しました。</li>
      <li>SessionのコンテキストであるHttpSessionオブジェクトの生成を必要になるまで遅延するようにしました。</li>
      <li>同梱のRhinoのバージョンを最新の1.6-r2に置換えました。</li>
      <li>Cycleのフラッシュ関連の仕組みを整理微調整しました。</li>
      <li>XMLテンプレートで用いられるプレフィックスの解決において、.maya上のプレフィックスマッピングをテンプレート上でそのまま使っている箇所があったので修正しました。</li>
      <li>ライセンスを、SSL1.1から、ASL2.0に変更しました。</li>
      <li>ログ文字列の出力において、適切な文字列フォーマット処理を行えていなかった箇所を修正し、適切な出力が行われるようにしました。</li>
      <li>NekoHTML0.9.5の挙動にて、ごくまれにxmlns:*というプレフィックスマッピングの記述を、xmlns名前空間の単なる属性としてSAXハンドラにわたってくることがある場合の、回避を行いました。</li>
      <li>強制的にMayaの出力をProxy/ブラウザキャッシュさせないようにしていたところを、設定可能にし、デフォルト状態ではキャッシュコントロールをしないようにしました。</li>
      <li>テンプレートコンポーネントも、デザイン継承機能を利用できるように修正しました。</li>
      <li>WARファイルによるディストロに、開発時参照用のソースコートアーカイブ（ZIPファイル）を作成・添付するようにしました。</li>
    </ul>


    <h4><a id="ver0.9.12" name="ver0.9.12"></a>変更点 0.9.11 -> 0.9.12 (2005/09/16)</h4>
    <ul>
      <li>ProviderFactoryImplで、maya.providerファイルを読み込む際に、各コンポーネントの生成を決め打ちでおこなっていたところを修正しました。</li>
      <li>m:doRenderプロセッサで、m:rendered="true"としたときに、テンプレートエレメントが出力されない問題を修正しました。</li>
      <li>テンプレートエレメントが直接描画される場合に、m:rendered="false"を記述すると、そのエレメントおよび子のエレメントの出力が抑制されるS2JSF互換機能を追加しました。</li>
      <li>ページ描画時のイベントを、m:beforeRender属性およびm:afterRender属性のものに加え、m:beforeRenderタグおよびm:afterRenderタグでも行う機能を追加しました。</li>
      <li>m:pageプロセッサおよびm:doRenderプロセッサに、m:name属性を追加し、名前明示にて同一テンプレート中の複数コンポーネントブロックを呼び分けることができるようにしました。</li>
      <li>コンポーネント上でもちいる描画機能として、m:doBodyから分離してm:doBaseを用意しました。</li>
      <li>MLDのproperty定義に、final属性を追加し、アプリケーションにて変更不可の値設定を行えるようにしました。</li>
      <li>.mayaファイルだけでテンプレートの無いコンポーネントを作れるようにしました。</li>
      <li>Tiles類似のデザイン継承機能を追加しました。</li>
      <li>HTMLテンプレートのHTMLエレメントに直接m:classやm:beforeRenderなどの記述を許していましたが、上記デザイン継承機能と矛盾するようになったので、廃止しました。結果、ページモデルおよびページイベントの機能を利用する場合には、.mayaファイルを必要とするようになりました。</li>
    </ul>


    <h4><a id="ver0.9.11" name="ver0.9.11"></a>変更点 0.9.10 -> 0.9.11 (2005/09/07)</h4>
    <ul>
      <li>ECMA1.3のBoolean値の取り扱いにおいて、意図しない動作となる問題を回避しました。</li>
      <li>テンプレート上の属性に、空白文字を値とするものがあると動作しないバグを修正しました。</li>
      <li>テンプレート上のエレメントのidがマッチするものが無いときに例外を出していたところを、警告のログ出力するにとどめるよう、変更しました。</li>
      <li>パース済みテンプレートがきちんとキャッシュされていないバグを修正しました。</li>
      <li>.mayaファイルの直接実行を可能にしました。ブラウザから直接.maya拡張子のURLにアクセスすると、エンジンおよび該当ページの.mayaのイベント発火を行いますが、テンプレート描画はしません。</li>
      <li>ServiceCycleに、スクリプトファイルをロードする、load(systemID, encoding)メソッドを追加しました。この機能によって、スクリプトソースをスクリプト実行にて読み込むことができるようになりました。</li>
    </ul>


    <h4><a id="ver0.9.10" name="ver0.9.10"></a>変更点 0.9.9 -> 0.9.10 (2005/09/06)</h4>
    <ul>
      <li>m:forプロセッサに、最大ループ回数を制限するmaxプロパティを新設しました。</li>
      <li>.mayaファイル上のノードボディで直接スクリプトブロックを記述したとき、かつそのノードがm:attribute以外のノードを含まないときに、隠蔽されるべきテンプレート上の子ノードを出力してしまうバグを修正しました。</li>
      <li>Responseがnullを出力時にNullPointerExceptionを発生させてしまうバグを修正しました。</li>
      <li>m:elementプロセッサにおいて、動的に追加されたm:attributeオブジェクトを、自スレッドの他プロセッサで共有してしまうというバグを修正しました。</li>
      <li>ScriptResolverを廃止して、AttributeScopeによる拡張を行うように、スクリプト環境のスコープ概念と併せて変更しました。</li>
      <li>AttributeScope#getAttribute(String)において、スクリプト内部のオブジェクトをJavaのオブジェクトに変換せずに返していていたために問題が発生していたので、Javaオブジェクトを基本として、冗長変換を行うように修正しました。</li>
      <li>web.xmlに、taglib-locationにて「/WEB-INF/」を含むパスの指定を行うと不正なソース指定方法としていたところ、正常な処理を行うように変更しました。</li>
      <li>m:startComponentプロセッサをm:doRenderに、m:endComponentプロセッサをm:doBodyにそれぞれ統合しました。</li>
      <li>FolderSourceScannerのプロパティに再帰的に読むかどうかのフラグを追加しました。nameはrecursive、valueはtrueまたはfalseを指定します。</li>
      <li>FolderSourceScannerのプロパティに読むファイルを拡張子指定するものを追加しました。nameはextension、valueはピリオド(.)ありの拡張子を指定します。無指定の場合は対象となるファイルはありません。</li>
      <li>TLDの探し方を修正し、WEB-INF以下のすべてのTLDを読み込むようにしました。</li>
      <li>MLDの探し方をTLDに合わせて変更し、WEB-INF以下のすべてのMLDを読み込むようにしました。</li>
      <li>ElementProcessorをXHTMLに利用した場合において、xmlnsのマッピング定義出力を適切に行うように修正しました。</li>
      <li>.maya設定ファイルに、直接HTMLを書けるようにしました。</li>
    </ul>


    <h4><a id="ver0.9.9" name="ver0.9.9"></a>変更点 0.9.8 -> 0.9.9 (2005/08/30)</h4>
    <ul>
      <li>ServiceProviderなどをStrutsなどの外部のフレームワークからも利用できるように、
      ThreadLocalを利用してServiceCycleを保持するようにしました。</li>
      <li>TemplateProcessor、ScriptResolverといったメソッド引数にServiceCycleを取るものを全て整理し、
      ServiceCycleを引数渡しせず、ServiceProviderから取得するようにしました。</li>
      <li>例外時やデバッグ作業時に、実行中のテンプレートもしくは設定XMLの該当箇所を知る手がかりを得られるように、
      ServiceCycle#getOriginalNode() メソッドおよび、getInjectionNode()メソッドを追加し、
      エンジン中で情報更新を常に行うようにしました。</li>
      <li>JSP関連の機能およびコンポーネント関連の機能を、コアに移動しました。</li>
      <li>同梱するNekoHTMLのバージョンを0.9.5にアップデートしました。</li>
      <li>同梱するXercesのバージョンを2.7.1にアップデートしました。</li>
      <li>式言語の使用を廃止し、代えてスクリプト言語を利用するようにしました。実装では、
      JavaScriptのエンジンである、Rhinoを採用しています。</li>
      <li>外部のスクリプトソースファイルを読み込み実行する機能を追加しました。</li>
      <li>テンプレートや設定ファイル等のリソース読み込みメカニズムを全面刷新しました。
      maya.confファイルをJarのMETA-INFフォルダに配置しています。このことにより、
      Mayaのアプリケーションを開発する際に、開発者が行わなければならない手順を簡便化できました。</li>
      <li>デフォルトのエラーページのテンプレートを、JarのMETA-INFフォルダ直下に配置しました。</li>
      <li>本体、サンプル、テストをそれぞれ別々のEclipseプロジェクトにしました。</li>
      <li>ページの解決方法を変更し、/WEB-INF相対と、デフォルトパッケージ相対は読まないようにしました。
      それぞれ、/WEB-INF/page相対、/META-INF相対を読むようになっています。</li>
      <li>ウェルカムファイルの対応ががデグレして機能していなかったものを修正しました。</li>
      <li>ブランクアプリケーションをWARファイルで配布するようにしました。</li>
      <li>ページスコープを、スタック構造とすることによって、テンプレート上でのスクリプト実行において、名前衝突が発生しないようにしました。</li>
      <li>BeanPropertiesProcessorおよび、StackTraceElementsProcessorを廃止しました。
      スタックトレースのダンプは、ForProcessorとスクリプトの併用で対応できました。</li>
      <li>例外処理を行うErrorHandler内でさらに例外が発生したときに、先のアプリケーションで生じた例外を隠蔽してしまう問題を回避しました。</li>
    </ul>


    <h4><a id="ver0.9.8" name="ver0.9.8"></a>変更点 0.9.7.1 -> 0.9.8 (2005/08/04)</h4>
    <ul>
      <li>PageContextなどJSP-APIへの依存を局所化し、ServiceCycleオブジェクトにServlet-APIも隠蔽しました。</li>
      <li>未来日付のファイルを処理するときに、無限ループにはいる問題を修正しました。</li>
      <li>スペックを満たさないJSPカスタムタグを利用できないようにJSPコンテナとタグの
       バージョンチェックする機能を復活させました。</li>
      <li>URLClassLoaderを前提としたJarライブラリの検索をやめ、ファイルシステムを利用したJarファイルの検索を行うようにしました。</li>
      <li>サンプルのプレビュー再現性においてCSSがうまく効いてなかったのを修正しました。</li>
      <li>デフォルト名前空間を適切に処理しないバグを修正しました。</li>
      <li>XML宣言を出力しない問題を修正しました。</li>
      <li>JSP暗黙オブジェクトの対応を追加修正しました。</li>
      <li>JSPカスタムタグの属性に式を指定したとき、その式の例外をキャッチして食いつぶしていたところを、キャッチしないようにして、例外がそのまま伝播するように修正しました。</li>
      <li>その他、細かなバグ修正およびAPI仕様の変更をおこないました。</li>
    </ul>


    <h4><a id="ver0.9.7.1" name="ver0.9.7.1"></a>変更点 0.9.7 -> 0.9.7.1 (2005/07/17)</h4>
    <ul>
      <li>ネットワークに接続していないPC上で動作させると、web.xmlのDTD解決のために
         sun.comへ接続しようとして失敗し、動作しないという問題の回避策を行いました。</li>
    </ul>


    <h4><a id="ver0.9.7" name="ver0.9.7"></a>変更点 0.9.6 -> 0.9.7 (2005/07/05)</h4>
    <ul>
      <li>「/*」などのパスパターンにMayaサーブレットがマッピングされている際の、
      ウェルカムファイルアクセスに対するパス解決機能を追加しました。</li>
      <li>Cactusの使用をやめ、関連Jarをプロジェクトから取り除きました。</li>
      <li>.mayaファイル中にネストしたタグインジェクションを記述した場合の挙動について
       細かなバグを修正しました。</li>
      <li>ComponentPageProcessorがテンプレートボディを2度出力してしまう場合がある
       バグについて修正しました。</li>
      <li>SVNリポジトリに移動しました。https://www.seasar.org/svn/sandbox/maya/trunk
       がリポジトリURLとなります。</li>
      <li>idによるインジェクションを行う際に、/maya/*[@m:id='message']のように、2層目のみの
       idを検索するXPathから、/maya//*[@m:id='message']とn層目のidも検索するようにしました。</li>
       <li>PropertyDefinitionのサービスメソッドを変更しました。プロパティ設定をPropertyDefinition
       に委譲するように設計されていたものを、PropertyDefinitionはあくまでファクトリとして動作し、
       ProcessorDefinition内で設定処理を行うようにしました。 </li>
      <li>独自の例外の基底をMayaExceptionとしました。このMayaExceptionは、
       同一パッケージにあるmessage.propertiesより、完全修飾型名をキーに
       メッセージを取得する機能のみが実装されています。</li>
      <li>ページ描画途中に例外発生した際、コンテキストバッファをクリアしてなかったために、
       途中まで描画された後に例外ページの書き出しを行っていました。例外処理の中で
       コンテキストバッファをクリアすることにより、この問題に対応しました。</li>
      <li>依存するJaxenのバージョンを1.1-beta7に変更しました。</li>
      <li>名前空間URIを、http://www.seasar.org/maya から http://maya.seasar.org に変更しました。</li>
    </ul>

  </div><!-- id="contentsright" -->

  <div class="copyrights" align="center">
    <img src="../images/copyrights.gif" alt="Copyright (c) 2004-2007 the Seasar Foundation and others. all rights reserved." width="760" height="20">
  </div>

</div><!-- class="maincontents" -->

</body>
</html>